!function(){var e=window.CAB=window.CAB||{};e.referenceServiceUrl="/references-service/",e.referenceHelpLink="/references-help/"}();var Hogan={};!function(e){function t(e,t,n){var r;return t&&"object"==typeof t&&(void 0!==t[e]?r=t[e]:n&&t.get&&"function"==typeof t.get&&(r=t.get(e))),r}function n(e,t,n,r,i,o){function s(){}function a(){}s.prototype=e,a.prototype=e.subs;var c,l=new s;l.subs=new a,l.subsText={},l.buf="",r=r||{},l.stackSubs=r,l.subsText=o;for(c in t)r[c]||(r[c]=t[c]);for(c in r)l.subs[c]=r[c];i=i||{},l.stackPartials=i;for(c in n)i[c]||(i[c]=n[c]);for(c in i)l.partials[c]=i[c];return l}function r(e){return String(null===e||void 0===e?"":e)}function i(e){return e=r(e),u.test(e)?e.replace(o,"&amp;").replace(s,"&lt;").replace(a,"&gt;").replace(c,"&#39;").replace(l,"&quot;"):e}e.Template=function(e,t,n,r){e=e||{},this.r=e.code||this.r,this.c=n,this.options=r||{},this.text=t||"",this.partials=e.partials||{},this.subs=e.subs||{},this.buf=""},e.Template.prototype={r:function(){return""},v:i,t:r,render:function(e,t,n){return this.ri([e],t||{},n)},ri:function(e,t,n){return this.r(e,t,n)},ep:function(e,t){var r=this.partials[e],i=t[r.name];if(r.instance&&r.base==i)return r.instance;if("string"==typeof i){if(!this.c)throw new Error("No compiler available.");i=this.c.compile(i,this.options)}if(!i)return null;if(this.partials[e].base=i,r.subs){t.stackText||(t.stackText={});for(key in r.subs)t.stackText[key]||(t.stackText[key]=void 0!==this.activeSub&&t.stackText[this.activeSub]?t.stackText[this.activeSub]:this.text);i=n(i,r.subs,r.partials,this.stackSubs,this.stackPartials,t.stackText)}return this.partials[e].instance=i,i},rp:function(e,t,n,r){var i=this.ep(e,n);return i?i.ri(t,n,r):""},rs:function(e,t,n){var r=e[e.length-1];if(!f(r))return void n(e,t,this);for(var i=0;i<r.length;i++)e.push(r[i]),n(e,t,this),e.pop()},s:function(e,t,n,r,i,o,s){var a;return(!f(e)||0!==e.length)&&("function"==typeof e&&(e=this.ms(e,t,n,r,i,o,s)),a=!!e,!r&&a&&t&&t.push("object"==typeof e?e:t[t.length-1]),a)},d:function(e,n,r,i){var o,s=e.split("."),a=this.f(s[0],n,r,i),c=this.options.modelGet,l=null;if("."===e&&f(n[n.length-2]))a=n[n.length-1];else for(var u=1;u<s.length;u++)o=t(s[u],a,c),void 0!==o?(l=a,a=o):a="";return!(i&&!a)&&(i||"function"!=typeof a||(n.push(l),a=this.mv(a,n,r),n.pop()),a)},f:function(e,n,r,i){for(var o=!1,s=null,a=!1,c=this.options.modelGet,l=n.length-1;l>=0;l--)if(s=n[l],o=t(e,s,c),void 0!==o){a=!0;break}return a?(i||"function"!=typeof o||(o=this.mv(o,n,r)),o):!i&&""},ls:function(e,t,n,i,o){var s=this.options.delimiters;return this.options.delimiters=o,this.b(this.ct(r(e.call(t,i)),t,n)),this.options.delimiters=s,!1},ct:function(e,t,n){if(this.options.disableLambda)throw new Error("Lambda features disabled.");return this.c.compile(e,this.options).render(t,n)},b:function(e){this.buf+=e},fl:function(){var e=this.buf;return this.buf="",e},ms:function(e,t,n,r,i,o,s){var a,c=t[t.length-1],l=e.call(c);return"function"==typeof l?!!r||(a=this.activeSub&&this.subsText&&this.subsText[this.activeSub]?this.subsText[this.activeSub]:this.text,this.ls(l,c,n,a.substring(i,o),s)):l},mv:function(e,t,n){var i=t[t.length-1],o=e.call(i);return"function"==typeof o?this.ct(r(o.call(i)),i,n):o},sub:function(e,t,n,r){var i=this.subs[e];i&&(this.activeSub=e,i(t,n,this,r),this.activeSub=!1)}};var o=/&/g,s=/</g,a=/>/g,c=/\'/g,l=/\"/g,u=/[&<>\"\']/,f=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}}("undefined"!=typeof exports?exports:Hogan),function(e,t){"use strict";function n(e,t){for(var n in t)e[n]=t[n];return e}function r(n,r){this._events={},this._refs={},this.clearAll=!1,this._update=0,this._storeName=n,r&&"/"!==r.slice(-1)[0]&&(r=r+="/"),this._url=r;var i=this._namespace=".cab-references."+(""+Math.random()).slice(-1);t(e).on("storage"+i,this._onStorage.bind(this)).on("load pageshow focus".split(" ").join(i+" ")+i,this._load.bind(this,!1)),this._load()}var i={get:function(e){if(e=this.getKey(e),!this.clearAll)return this._refs[e]},add:function(e){(this.clearAll||0===this.count)&&(this._refs={},this.clearAll=!1);var t=this.getKey(e);e=this._refs[t]=n({date:Date.now(),key:t},e),this._save("add",e)},remove:function(e){var t=this.getKey(e);e=this._refs[t],delete this._refs[t],this._save("remove",e)},clear:function(){this.count()&&(this.clearAll=!0,this._save("clear"))},undoClear:function(){this.clearAll&&(this.clearAll=!1,this._save("undoClear"))},destroy:function(){localStorage.removeItem(this._storeName),t(e).off(this._namespace),this._events=null},count:function(){var e,t=0;if(this.clearAll)return 0;for(e in this._refs)++t;return t},toArray:function(){var e,t,r=[];if(!this.clearAll)for(e in this._refs)t=this._refs[e],this._refs.hasOwnProperty(e)&&r.push(n({},t));return r},on:function(e,t){var n=this._events;(n[e]=n[e]||[]).push(t)},emit:function(e,t){var n=this._events[e];if(n){var r=[].slice.call(arguments,1);n.forEach(function(e){e.apply(this,r)},this)}},getKey:function(e){if(null==e)throw new TypeError("No reference supplied");return"string"==typeof e?e:e.id+":"+(e.hash||"")},_save:function(e,t){var n=this,r=JSON.parse(localStorage.getItem(n._storeName))||{};this._update=((r.update||0)+1)%9007199254740991,localStorage.setItem(n._storeName,JSON.stringify({refs:n._refs,clearAll:n.clearAll,update:n._update,lastOwner:n.lastOwner})),this.emit(e,t),this.emit("change")},_load:function(){var e=JSON.parse(localStorage.getItem(this._storeName))||{};this._update!==e.update&&(this.lastOwner=e.lastOwner||"",this._update=e.update||0,this._refs=e.refs||{},this.clearAll=e.clearAll||!1,this.emit("load"),this.emit("change"))},_onStorage:function(e){var t=e.originalEvent.key;t===this._storeName&&this._load()},serverSave:function(e){if(this.lastOwner=e,this._save("owner"),!this._url)throw new Error("serviceUrl has not been configured");return this.count()?t.ajax({url:this._url+encodeURI(e),type:"PUT",contentType:"application/json; charset=UTF-8",data:JSON.stringify(this.toArray())}):t.ajax({url:this._url+encodeURI(e),type:"DELETE"})},serverLoad:function(e){if(!this._url)throw new Error("serviceUrl has not been configured");return t.ajax({url:this._url+encodeURI(e),dataType:"text"}).then(function(e,t,n){return{refs:JSON.parse(e),date:new Date(n.getResponseHeader("last-modified"))}},function(e){return 404===e.status?t.Deferred().resolve(null):t.Deferred().reject(e)})},replace:function(e){var t={};return e.forEach(function(e){var r=this.getKey(e),i=n({},e);i.key=r,t[r]=i},this),this.clearAll=!1,this._refs=t,this._save("replace")}};for(var o in i)r.prototype[o]=i[o];var s="cab_refs";if(e.localStorage){var a=e.CAB=e.CAB||{},c=new r(s,a.referenceServiceUrl);a.references=c}}(window,jQuery),!function(e,t){"use strict";function n(){r.count(),i.attr("data-references",r.count())}var r=e.CAB&&e.CAB.references;if(r){var i=t(".js-ref-dialog");r.on("change",n),n()}}(window,jQuery),!function(e,t){"use strict";function n(e){return e.getDate()+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()]+" "+e.getFullYear()}function r(e){var n='<button type="button" data-action="'+e.action+'"'+(e.className?' class="'+e.className+'"':"")+(e.autofocus?" autofocus":"")+">"+(e.icon?'<i aria-hidden="true" class="icon-'+e.icon+'"></i>':"")+e.text+"</button>";return t(n)[0]}function i(e,n){return t(e).on("submit",!1),t(n).addClass("button--submitting"),function(){t(e).off("submit"),t(n).removeClass("button--submitting")}}function o(n){n.preventDefault(),d||(p=r({action:"copy",text:O,icon:"copy",autofocus:!0}),h=r({action:"save",text:E,icon:"save"}),v=r({action:"clear",text:H,icon:"bin"}),m=r({action:"undo",text:D,icon:"undo",className:"hide"}),d=t.Dialog({title:R,className:"dialog--refs",footer:t([p,h,r({action:"load",icon:"load",text:j}),v,m,t('<a href="'+e.referenceHelpLink+'"><i aria-hidden="true" class="icon-help"></i>Help</a>')[0],r({action:"close",className:"right",text:S})])}).on("click","a[href]",function(){d.openedBy=null,d.close()}).on("click","[data-action=remove]",function(){var e=this.getAttribute("data-ref-key");K[e]=g.get(e),g.remove(e)}).on("click","[data-action=add]",function(){var e=this.getAttribute("data-ref-key"),t=K[e];delete K[e],g.add(t)}).on("click","[data-action=clear]",function(){g.clear()}).on("click","[data-action=undo]",function(){g.undoClear()}).on("click","[data-action=copy]",a).on("click","[data-action=save]",c).on("click","[data-action=load]",f).on("mouseenter focusin mouseleave focusout",".ref-dialog__item-button",function(e){t(this).closest("li").toggleClass("ref-dialog__list-item--highlight","mouseenter,focusin".indexOf(e.type)>-1)}),g.on("change",s)),s(),d.showModal()}function s(){var e=g.toArray(),n=g.clearAll;if(!n)for(var r in K)e.push(t.extend({removed:!0},K[r]));e=e.sort(function(e,t){return e.date-t.date});var i,o=t(document.activeElement);o.hasClass("ref-dialog__item-button")&&(i=o.data("ref-key"));var s=y.render({refs:e,clearAll:n},{item:_});d.$content.html(s);var a;i?a=d.$content.find('button.ref-dialog__item-button[data-ref-key="'+i+'"]'):o.is(v)&&n?a=t(m):o.is(m)&&!n&&(a=t(v)),t(v).toggleClass("hide",n),t(m).toggleClass("hide",!n),t([h,p,v]).attr("disabled",!g.count()),a&&a.focus()}function a(){var e=t.Dialog({title:M,className:"dialog--refs",destroyOnClose:!0,content:w.render({refs:g.toArray(),cmd:navigator.platform.indexOf("Mac")?"Cmd":"Ctrl",host:location.protocol+"//"+location.host}),footer:t(r({action:"close",text:S}))}).on("copy",function(){setTimeout(function(){e.close()},0)});e.showModal();var n=t(".ref-dialog__copy")[0];if(document.createRange){var i=window.getSelection(),o=document.createRange();o.selectNode(n),i.removeAllRanges(),i.addRange(o);try{if(document.execCommand("copy",null,null)===!1)throw 0;e.close()}catch(s){o.selectNode(n),i.removeAllRanges(),i.addRange(o)}n.contentEditable=!1}else if(document.body.createTextRange){var a=document.body.createTextRange();a.moveToElementText(n),a.select(),a.execCommand("copy",null,null),e.close()}}function c(){var e,n=(g.lastOwner||"").split("\\")[0],o=t.Dialog({title:U,className:"dialog--refs--save",destroyOnClose:!0,content:k.render({bureau:n,uniqueId:"6ae7b45c-8678-4851-96e5-ab6ffd2472da"}),footer:t([r({action:"close",text:N,icon:"cross"}),e=r({action:"save",text:E,icon:"save"})])}).on("close",function(){o.destroy()}).on("click","[data-action=save]",function(){o.$content.find("input[type=submit]").click()}).on("submit","form",function(t){t.preventDefault();var n=this.bureau.value.trim()+"\\"+this.name.value.trim(),r=i(this,e);g.serverLoad(n).then(function(e){return null!==e&&e.refs&&e.refs.length?l(e).then(function(e){return!!e&&void 0}):e}).then(function(e){return e!==!1?g.serverSave(n).then(function(){u(),o.close()}):void 0}).fail(function(e){r(),b(B,A.render({error:e.statusText}))})});o.showModal()}function l(e){var i=t.Deferred(),o=t.Dialog({title:J,destroyOnClose:!0,className:"dialog--refs",content:x.render({refs:e.refs,date:n(e.date)}),footer:t([r({action:"close",text:N,icon:"cross"}),r({action:"save",text:I,icon:"tick"})])}).on("click","[data-action=save]",function(){i.resolve(!0),o.close()}).on("close",function(){i.resolve(!1)});return o.showModal(),i.promise()}function u(){var e=g.lastOwner.split("\\");t.Dialog({title:L,className:"dialog--refs--save",destroyOnClose:!0,content:C.render({bureau:e[0],name:e.slice(1).join("\\")}),footer:t([r({action:"close",text:S,icon:"cross"})])}).showModal()}function f(){var e,n=(g.lastOwner||"").split("\\")[0],o=t.Dialog({title:q,destroyOnClose:!0,className:"dialog--refs--save",content:$.render({bureau:n,uniqueId:"6ae7b45c-8678-4851-96e5-ab6ffd2472da"}),footer:t([r({action:"close",text:N,icon:"cross"}),e=r({action:"load",text:j,icon:"load"})])}).on("click","[data-action=load]",function(){o.$content.find("input[type=submit]").click()}).on("submit","form",function(t){t.preventDefault();var n=this.bureau.value.trim(),r=this.name.value.trim(),s=n+"\\"+r,a=i(this,e);g.serverLoad(s).then(function(e){o.close(),null!==e?(g.lastOwner=s,K={},g.replace(e.refs)):b(Q,T.render({bureau:n,name:r}))}).fail(function(e){a(),b(B,A.render({error:e.statusText}))})});o.showModal()}function b(e,n){t.Dialog({title:e,destroyOnClose:!0,className:"dialog--refs--save",content:n,footer:t([r({action:"close",text:S,icon:"cross"})])}).showModal()}var d,h,p,v,m,g=window.CAB&&window.CAB.references,y=new Hogan.Template({code:function(e,t,n){var r=this;return r.b(n=n||""),r.s(r.d("refs.length",e,t,1),e,t,0,16,101,"{{ }}")&&(r.rs(e,t,function(e,t,r){r.b('<ul class="ref-dialog__list arrow-list">\r'),r.b("\n"+n),r.s(r.f("refs",e,t,1),e,t,0,69,83,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b(n.rp("<item0",e,t,""))}),e.pop()),r.b("</ul>\r"),r.b("\n"+n)}),e.pop()),r.s(r.d("refs.length",e,t,1),e,t,1,0,0,"")||(r.s(r.f("clearAll",e,t,1),e,t,0,150,300,"{{ }}")&&(r.rs(e,t,function(e,t,r){r.b("<p>\r"),r.b("\n"+n),r.b("References have been cleared \r"),r.b("\n"+n),r.b('<button type="button" data-action="undo">\r'),r.b("\n"+n),r.b('<i aria-hidden="true" class="icon-undo"></i>\r'),r.b("\n"+n),r.b("Undo\r"),r.b("\n"+n),r.b("</button>\r"),r.b("\n"+n),r.b("</p>\r"),r.b("\n"+n)}),e.pop()),r.s(r.f("clearAll",e,t,1),e,t,1,0,0,"")||(r.b("<p>No references have been added.</p>\r"),r.b("\n"+n))),r.fl()},partials:{"<item0":{name:"item",partials:{},subs:{}}},subs:{}}),_=new Hogan.Template({code:function(e,t,n){var r=this;return r.b(n=n||""),r.b('<li data-ref-key="'),r.b(r.v(r.f("key",e,t,0))),r.b('" class="ref-dialog__list-item'),r.s(r.f("removed",e,t,1),e,t,0,67,98,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b(" ref-dialog__list-item--removed")}),e.pop()),r.b('">\r'),r.b("\n"+n),r.s(r.f("removed",e,t,1),e,t,0,126,131,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<del>")}),e.pop()),r.b("\r"),r.b("\n"+n),r.b('<a href="'),r.b(r.v(r.f("url",e,t,0))),r.b('">\r'),r.b("\n"+n),r.b(r.v(r.f("title",e,t,0))),r.b(" \r"),r.b("\n"+n),r.b("("),r.b(r.v(r.f("extent",e,t,0))),r.b(")\r"),r.b("\n"+n),r.s(r.f("section",e,t,1),e,t,0,203,303,"{{ }}")&&(r.rs(e,t,function(e,t,r){r.b("ยง "),r.b(r.v(r.f("section",e,t,0))),r.b("\r"),r.b("\n"+n),r.s(r.f("paraStart",e,t,1),e,t,0,234,287,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("("),n.b(n.v(n.f("paraStart",e,t,0))),n.s(n.f("paraEnd",e,t,1),e,t,0,260,274,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b(" - "),n.b(n.v(n.f("paraEnd",e,t,0)))}),e.pop()),n.b(")")}),e.pop()),r.b("\r"),r.b("\n"+n)}),e.pop()),r.b("</a>\r"),r.b("\n"+n),r.s(r.f("removed",e,t,1),e,t,0,335,341,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("</del>")}),e.pop()),r.b("\r"),r.b("\n"+n),r.s(r.f("removed",e,t,1),e,t,0,367,571,"{{ }}")&&(r.rs(e,t,function(e,t,r){r.b('<button class="ref-dialog__item-button" type="button" data-action="add" data-ref-key="'),r.b(r.v(r.f("key",e,t,0))),r.b('"><i aria-hidden="true" class="icon-undo icon--no-text"></i><span class="screenreader">Undo</span></button>\r'),r.b("\n"+n)}),e.pop()),r.s(r.f("removed",e,t,1),e,t,1,0,0,"")||(r.b('<button class="ref-dialog__item-button" type="button" data-action="remove" data-ref-key="'),r.b(r.v(r.f("key",e,t,0))),r.b('"><i aria-hidden="true" class="icon-bin icon--no-text"></i><span class="screenreader">Delete</span></button>\r'),r.b("\n"+n)),r.b("</li>"),r.fl()},partials:{},subs:{}}),w=new Hogan.Template({code:function(e,t,n){var r=this;return r.b(n=n||""),r.b('<p>Press <strong class="key">'),r.b(r.v(r.f("cmd",e,t,0))),r.b('</strong> + <strong class="key">C</strong> or go to <strong>Edit</strong> then <strong>Copy</strong>, to copy.</p>\r'),r.b("\n"+n),r.b("\r"),r.b("\n"+n),r.b('<div class="ref-dialog__copy">\r'),r.b("\n"+n),r.s(r.f("refs",e,t,1),e,t,0,195,401,"{{ }}")&&(r.rs(e,t,function(e,t,r){r.b("<p>\r"),r.b("\n"+n),r.b('<a href="'),r.b(r.v(r.f("url",e,t,0))),r.b('">\r'),r.b("\n"+n),r.b(r.v(r.f("title",e,t,0))),r.b(" \r"),r.b("\n"+n),r.b("("),r.b(r.v(r.f("extent",e,t,0))),r.b(")\r"),r.b("\n"+n),r.s(r.f("section",e,t,1),e,t,0,260,360,"{{ }}")&&(r.rs(e,t,function(e,t,r){r.b("ยง "),r.b(r.v(r.f("section",e,t,0))),r.b("\r"),r.b("\n"+n),r.s(r.f("paraStart",e,t,1),e,t,0,291,344,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("("),n.b(n.v(n.f("paraStart",e,t,0))),n.s(n.f("paraEnd",e,t,1),e,t,0,317,331,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b(" - "),n.b(n.v(n.f("paraEnd",e,t,0)))}),e.pop()),n.b(")")}),e.pop()),r.b("\r"),r.b("\n"+n)}),e.pop()),r.b("</a>\r"),r.b("\n"+n),r.b("<br>\r"),r.b("\n"+n),r.b(r.v(r.f("url",e,t,0))),r.b("\r"),r.b("\n"+n),r.b("</p>\r"),r.b("\n"+n)}),e.pop()),r.b("</div>\r"),r.b("\n"+n),r.b("\r"),r.b("\n"+n),r.b("\r"),r.b("\n"+n),r.b("\r"),r.b("\n"),r.fl()},partials:{},subs:{}}),k=new Hogan.Template({code:function(e,t,n){var r=this;return r.b(n=n||""),r.b("<p>This will save the references to the server. They can then be loaded on another computer.</p>\r"),r.b("\n"+n),r.b("\r"),r.b("\n"+n),r.b('<form class="form">\r'),r.b("\n"+n),r.b('<label for="bureau-'),r.b(r.v(r.f("uniqueId",e,t,0))),r.b('" class="form__row">\r'),r.b("\n"+n),r.b("Bureau name\r"),r.b("\n"+n),r.b('<input type="text" name="bureau" id="bureau-'),r.b(r.v(r.f("uniqueId",e,t,0))),r.b('" value="'),r.b(r.v(r.f("bureau",e,t,0))),r.b('" required pattern="[^\\\\]+" maxlength="100">\r'),r.b("\n"+n),r.b("</label>\r"),r.b("\n"+n),r.b('<label for="name-'),r.b(r.v(r.f("uniqueId",e,t,0))),r.b('" class="form__row">\r'),r.b("\n"+n),r.b("Your name\r"),r.b("\n"+n),r.b('<input type="text" name="name" id="name-'),r.b(r.v(r.f("uniqueId",e,t,0))),r.b('" required pattern="[^\\\\]+" maxlength="100">\r'),r.b("\n"+n),r.b("</label>\r"),r.b("\n"+n),r.b('<input type="submit" class="hide">\r'),r.b("\n"+n),r.b("</form>\r"),r.b("\n"+n),r.b("\r"),r.b("\n"),r.fl()},partials:{},subs:{}}),x=new Hogan.Template({code:function(e,t,n){var r=this;return r.b(n=n||""),r.b("<p>You will overwrite the following references save on <strong>"),r.b(r.v(r.f("date",e,t,0))),r.b("</strong></p>\r"),r.b("\n"+n),r.b("\r"),r.b("\n"+n),r.b("<ul>\r"),r.b("\n"+n),r.s(r.f("refs",e,t,1),e,t,0,103,270,"{{ }}")&&(r.rs(e,t,function(e,t,r){r.b("<li>\r"),r.b("\n"+n),r.b(r.v(r.f("title",e,t,0))),r.b(" \r"),r.b("\n"+n),r.b("("),r.b(r.v(r.f("extent",e,t,0))),r.b(")\r"),r.b("\n"+n),r.s(r.f("section",e,t,1),e,t,0,149,249,"{{ }}")&&(r.rs(e,t,function(e,t,r){r.b("ยง "),r.b(r.v(r.f("section",e,t,0))),r.b("\r"),r.b("\n"+n),r.s(r.f("paraStart",e,t,1),e,t,0,180,233,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("("),n.b(n.v(n.f("paraStart",e,t,0))),n.s(n.f("paraEnd",e,t,1),e,t,0,206,220,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b(" - "),n.b(n.v(n.f("paraEnd",e,t,0)))}),e.pop()),n.b(")")}),e.pop()),r.b("\r"),r.b("\n"+n)}),e.pop()),r.b("</li>\r"),r.b("\n"+n)}),e.pop()),r.b("</ul>\r"),r.b("\n"+n),r.b("<p>Do you really want to save?</p>\r"),r.b("\n"),r.fl()},partials:{},subs:{}}),C=new Hogan.Template({code:function(e,t,n){var r=this;return r.b(n=n||""),r.b("<p>References successfully saved</p>\r"),r.b("\n"+n),r.b("\r"),r.b("\n"+n),r.b("<p>To recover these references later you will need to enter the following details:</p>\r"),r.b("\n"+n),r.b("\r"),r.b("\n"+n),r.b('<table class="table--properties">\r'),r.b("\n"+n),r.b("<tr>\r"),r.b("\n"+n),r.b('<th scope="row">Bureau name:</th>\r'),r.b("\n"+n),r.b("<td>"),r.b(r.v(r.f("bureau",e,t,0))),r.b("</td>\r"),r.b("\n"+n),r.b("</tr>\r"),r.b("\n"+n),r.b("<tr>\r"),r.b("\n"+n),r.b('<th scope="row">Your name:</th>\r'),r.b("\n"+n),r.b("<td>"),r.b(r.v(r.f("name",e,t,0))),r.b("</td>\r"),r.b("\n"+n),r.b("</tr>\r"),r.b("\n"+n),r.b("</table>\r"),r.b("\n"+n),r.b("\r"),r.b("\n"),r.fl()},partials:{},subs:{}}),$=new Hogan.Template({code:function(e,t,n){var r=this;return r.b(n=n||""),r.b("<p>Retrieve references from the server.</p>\r"),r.b("\n"+n),r.b("\r"),r.b("\n"+n),r.b("<p>This will replace the current references.</p>\r"),r.b("\n"+n),r.b("\r"),r.b("\n"+n),r.b('<form class="form">\r'),r.b("\n"+n),r.b('<label for="bureau-'),r.b(r.v(r.f("uniqueId",e,t,0))),r.b('" class="form__row">\r'),r.b("\n"+n),r.b("Bureau name\r"),r.b("\n"+n),r.b('<input type="text" name="bureau" id="bureau-'),r.b(r.v(r.f("uniqueId",e,t,0))),r.b('" value="'),r.b(r.v(r.f("bureau",e,t,0))),r.b('" required pattern="[^\\\\]+" maxlength="100">\r'),r.b("\n"+n),r.b("</label>\r"),r.b("\n"+n),r.b('<label for="name-'),r.b(r.v(r.f("uniqueId",e,t,0))),r.b('" class="form__row">\r'),r.b("\n"+n),r.b("Your name\r"),r.b("\n"+n),r.b('<input type="text" name="name" id="name-'),r.b(r.v(r.f("uniqueId",e,t,0))),r.b('" required pattern="[^\\\\]+" maxlength="100">\r'),r.b("\n"+n),r.b("</label>\r"),r.b("\n"+n),r.b('<input type="submit" class="hide">\r'),r.b("\n"+n),r.b("</form>\r"),r.b("\n"+n),r.b("\r"),r.b("\n"),r.fl()},partials:{},subs:{}}),A=new Hogan.Template({code:function(e,t,n){var r=this;return r.b(n=n||""),r.b("<p><p>Sorry there has been an error. Please try again.\r"),r.b("\n"+n),r.b("<p>If the error persists please contact support.\r"),r.b("\n"+n),r.b('<p class="highlight--error">'),r.b(r.v(r.f("error",e,t,0))),r.fl()},partials:{},subs:{}}),T=new Hogan.Template({code:function(e,t,n){var r=this;return r.b(n=n||""),r.b('<p class="highlight--warning">\r'),r.b("\n"+n),r.b("No references found on the server stored under <strong>"),r.b(r.v(r.f("bureau",e,t,0))),r.b("</strong> and <strong>"),r.b(r.v(r.f("name",e,t,0))),r.b("</strong>.\r"),r.b("\n"+n),r.b("</p>\r"),r.b("\n"),r.fl()},partials:{},subs:{}}),S="Close",N="Cancel",E="Save",I="Yes",j="Retrieve",O="Copy",H="Clear",D="Undo",B="Error",R="References",q="Retrieve from server",M="Copy references",U="Save to server",J="Confirm save",L="Saved",Q="No references found",K={};g&&t(".js-ref-dialog").on("click",o)}(window.CAB,jQuery),function(e,t){"use strict";function n(){var e=t("head");c={id:e.find('meta[name="cab-guid"]').prop("content"),extent:e.find('meta[name="cab-extent"]').prop("content"),title:t("h1").eq(0).text().replace(/\s+/g," ").trim(),url:location.href.replace(/[?#].*$/,"")}}function r(e){var n=t(e.delegateTarget);e.preventDefault(),n.hasClass(b)?a.remove(n.data(u)):a.add(n.data(u))}function i(){var e,n,i=t(this),o={};if(!i.is("h1")){if(!this.id)return;o={hash:this.id||"",section:this.textContent||this.innerText||"",paraStart:this.getAttribute("data-para-start")||"",paraEnd:this.getAttribute("data-para-end")||"",url:c.url+"#"+this.id}}e=t.extend({},c,o),n=t('<span class="'+f+'__toggle"/>').data(u,e).on("click",".js-toggle-ref",r).html('<button class="js-toggle-ref btn-secondary btn-small" type="button">Add reference</button>'),i.removeClass("js-ref").addClass(f).wrapInner('<span class="'+f+'__heading"/>').append(n),l[a.getKey(e)]=n}function o(){var e;for(e in l)s(e,l[e]);t(window).trigger("resize")}function s(e,t){var n=!1,r="",i=!!a.get(e);i&&!t.hasClass(b)?(n=!0,r=h):i||t.hasClass(d)||(n=!0,r=p),n&&t.toggleClass(b,i).toggleClass(d,!i).find("button").text(r)}var a=window.CAB&&window.CAB.references;if(a){var c,l={},u="cab-ref",f="ref-heading",b=f+"__toggle--on",d=f+"__toggle--off",h="Added",p="Add reference";n(),t(".js-ref").each(i),o(),a.on("change",o)}}(window,jQuery);var Notification=function(e,t){var n="is-hidden",r=function(e,t,n,r){window.Cookies.set(e,t,{expires:n,path:r||""})},i=function(t,r){r?e(t).removeClass(n):e(t).addClass(n)},o=function(){e(".js-c-notification").each(function(){var t={},n=e(this);t.testVersion=e(this).data("test"),t.cookieName=e(this).data("cookiename"),t.cookieExpiration=e(this).data("cookieexpiration"),window.Cookies.get(t.cookieName)?t.display=!1:t.display=!0,i(n,t.display),e(".js-c-notification__btn",e(this)).on("click",function(){t.display=!1,r(t.cookieName,t.display,parseInt(t.cookieExpiration)),i(n,t.display)})})};return{render:o}}(jQuery,window.Cookies);Notification.render(),function(){var e,t;e=this.jQuery||window.jQuery,t=e(window),e.fn.stick_in_parent=function(n){var r,i,o,s,a,c,l,u,f,b,d;for(null==n&&(n={}),d=n.sticky_class,a=n.inner_scrolling,b=n.recalc_every,f=n.parent,u=n.offset_top,l=n.spacer,i=n.bottoming,null==u&&(u=0),null==f&&(f=void 0),null==a&&(a=!0),null==d&&(d="is_stuck"),r=e(document),null==i&&(i=!0),o=function(n,o,s,c,h,p,v,m){var g,y,_,w,k,x,C,$,A,T,S,N;if(!n.data("sticky_kit")){if(n.data("sticky_kit",!0),k=r.height(),C=n.parent(),null!=f&&(C=C.closest(f)),!C.length)throw"failed to find stick parent";if(g=_=!1,(S=null!=l?l&&n.closest(l):e("<div />"))&&S.css("position",n.css("position")),$=function(){var e,t,i;if(!m&&(k=r.height(),e=parseInt(C.css("border-top-width"),10),t=parseInt(C.css("padding-top"),10),o=parseInt(C.css("padding-bottom"),10),s=C.offset().top+e+t,c=C.height(),_&&(g=_=!1,null==l&&(n.insertAfter(S),S.detach()),n.css({position:"",top:"",width:"",bottom:""}).removeClass(d),i=!0),h=n.offset().top-(parseInt(n.css("margin-top"),10)||0)-u,p=n.outerHeight(!0),v=n.css("float"),S&&S.css({width:n.outerWidth(!0),height:p,display:n.css("display"),"vertical-align":n.css("vertical-align"),"float":v}),i))return N()},$(),p!==c)return w=void 0,x=u,T=b,N=function(){var e,f,y,A;if(!m&&(y=!1,null!=T&&(--T,0>=T&&(T=b,$(),y=!0)),y||r.height()===k||$(),y=t.scrollTop(),null!=w&&(f=y-w),w=y,_?(i&&(A=y+p+x>c+s,g&&!A&&(g=!1,n.css({position:"fixed",bottom:"",top:x}).trigger("sticky_kit:unbottom"))),y<h&&(_=!1,x=u,null==l&&("left"!==v&&"right"!==v||n.insertAfter(S),S.detach()),e={position:"",width:"",top:""},n.css(e).removeClass(d).trigger("sticky_kit:unstick")),a&&(e=t.height(),p+u>e&&!g&&(x-=f,x=Math.max(e-p,x),x=Math.min(u,x),_&&n.css({top:x+"px"})))):y>h&&(_=!0,e={position:"fixed",top:x},e.width="border-box"===n.css("box-sizing")?n.outerWidth()+"px":n.width()+"px",n.css(e).addClass(d),null==l&&(n.after(S),"left"!==v&&"right"!==v||S.append(n)),n.trigger("sticky_kit:stick")),_&&i&&(null==A&&(A=y+p+x>c+s),!g&&A)))return g=!0,"static"===C.css("position")&&C.css({position:"relative"}),n.css({position:"absolute",bottom:o,top:"auto"}).trigger("sticky_kit:bottom")},A=function(){return $(),N()},y=function(){if(m=!0,t.off("touchmove",N),t.off("scroll",N),t.off("resize",A),e(document.body).off("sticky_kit:recalc",A),n.off("sticky_kit:detach",y),n.removeData("sticky_kit"),n.css({position:"",bottom:"",top:"",width:""}),C.position("position",""),_)return null==l&&("left"!==v&&"right"!==v||n.insertAfter(S),S.remove()),n.removeClass(d)},t.on("touchmove",N),t.on("scroll",N),t.on("resize",A),e(document.body).on("sticky_kit:recalc",A),n.on("sticky_kit:detach",y),setTimeout(N,0)}},s=0,c=this.length;s<c;s++)n=this[s],o(e(n));return this}}.call(this);var advisernetSidenav=function(){function e(e,t){b.split("#")[1]===e?$(f).each(function(){$(this).parent().removeClass("active");var e=$(this).attr("href").split("#")[1];b.indexOf(e)>1&&$(this).parent().addClass("active")}):($(f).each(function(){$(this).parent().removeClass("active")}),$(t).parent().addClass("active"))}function t(e){$(e).width($(c).width())}function n(){$(l).has("ul").each(function(){$(this).addClass("children")})}function r(e){e.parents(l).has("ul")&&(e.parents(l).toggleClass("expanded"),e.parents(l).children(u).toggleClass("collapsed"),e.parents(l).hasClass("expanded")?e.parents().attr("aria-expanded","true"):e.parents().attr("aria-expanded","false"))}function i(){var e=$(".main-content"),t=$(this).scrollTop(),n=t+$(this).height(),r=e.offset().top,i=r+e.outerHeight(),o=r<t?t:r,s=i>n?n:i,a=s-o;$(c).css({maxHeight:a})}function o(){i(),$(this).scrollTop()>=$(".main-content").offset().top&&$(window).width()>750?(t(c),p.stick(c)):$(this).scrollTop()<$(".main-content").offset().top&&p.detach(c);var e=$("#footer").offset().top-40;$(window).scrollTop()>=e&&(document.getElementById("sidebar").style.maxHeight=0),$(window).width()<1020&&(document.getElementById("sidebar").style.width=null,$(window).width()<750&&(p.detach(c),document.getElementById("sidebar").style.maxHeight=null))}function s(e,t,n){for(var r=$(e),i=$(t),o=r.height(),s=i.outerHeight(!0),a=i.index(),c=$(".sidebar__menu--list").find("> li"),l=$(".sidebar__menu h2:nth-child(2)").outerHeight(!0),u=0,f=0;f<a;f++)u+=$(c[f]).outerHeight(!0);r.scrollTop(Math.max(0,u-(o-s-2*l)/2))}function a(){n(),$(h).on("click",function(){r($(this).parent())}),$(d).on("click",function(e){$(".sidebar__menu h2:nth-child(2)").toggle(),$(".sidebar__menu--heading_mobile").toggleClass("expanded"),$(".sidebar__menu--list").toggle()}),$(window).on("scroll resize",o),$(window).on("load",function(){t(c),e(window.location.href.split("#")[1]),$(window).width()>750&&s(".sidebar__menu",".active")}),$(f).on("click",function(t){e($(this).attr("href").split("#")[1],$(this))})}var c=$("#sidebar"),l=($("#footer"),$(".sidebar__menu--sub-heading")),u=($(".sidebar__menu-toggle-wrapper"),$(".sidebar__sub--menu")),f=$(".sidebar__menu--sub-heading.expanded .sidebar__sub--menu li a"),b=window.location.href,d=$(".sidebar__menu--heading_mobile"),h=($(window).innerHeight(),$(".sidebar__menu-toggle")),p={detach:function(e){e.removeClass("sticky scroll")},stick:function(e){e.addClass("sticky scroll")}};return{render:a}}();$("#sidebar.sidebar__menu").length>0&&advisernetSidenav.render();